#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=20000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_CHUNKSIZE=1500
export PMC_CLUSTERS=25
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 50"
export PMC_FINAL_CHUNKSIZE=1000000
export PMC_GROUP_BY_RVALUE=2
export PMC_INITIALIZATION="$PMC_INITIALIZATION --pmc-r-value-no-nuisance 0"

export PMC_NUMBER_OF_JOBS=100
export PMC_RESOURCE_MANAGER=loadleveler
export LL_QUEUE=test
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=30
export PMC_CLIENT_ARGV="--resume-update --step 0"

# starting point from mcmc
export GOF_MODE_0="{ +0.8170075725691445 +0.2247943176876167 +0.1490050945282886 +0.3168132555365649 +1.2708521410902924 +4.2028600557706346 +0.2249513655419006 +0.3603893070682455 -4.8415787098574858 +0.8830063395159252 +1.2017009053018275 +0.2361286442447113 +0.5045777437811548 +0.2069419541801163 -1.0338804243749056 +0.0761940721669448 -0.1445974496473847 +0.0058896770985246 +0.9322907759217978 +1.0273883867037601 +0.9404891269320758 +0.9456417394206460 +0.4893501763513130 +0.3511259481712687 }"

# COBYLA
export GOF_MODE_0="{
 +0.8115232660598428 +0.2250879842513059 +0.1380863258305131
 +0.3915666762640409 +1.2741320199875423 +4.1945745052647911
 +0.2264775079564376 +0.3666384516546560 -4.7156609719153204
 +0.8778322525564373 +1.1608386458136406 +0.2499410402093160
 +0.4826516064499795 +0.2296524414273502 -1.0556631955243019
 +0.0343999763134990 +0.0520919897526320 +0.0132190586706142
 +0.9337477788287031 +1.0156020621284432 +0.9364364104000442
 +1.1140468600910194 +0.4649157954073980 +0.3505810831790707 }"

main $@
