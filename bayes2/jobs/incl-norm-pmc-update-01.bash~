#!/bin/bash
#SBATCH --mail-type=FAIL
#SBATCH --mail-user=vandyk@tp1.physik.uni-siegen.de
#SBATCH --mincpus=6
#SBATCH --nodes=1
#SBATCH --output=/scratch/vandyk/bayes2/incl-norm/2013-06-25/pmc_update_01.slurm.out
#SBATCH --error=/scratch/vandyk/bayes2/incl-norm/2013-06-25/pmc_update_01.slurm.err
#SBATCH --time=20:00:00
# vim: set sts=4 et:

IDX=01
CURRENT=$((${IDX}))
PREVIOUS=$((${IDX} - 1))
SEED=$((12345 + 100 * ${IDX}))
BASE_NAME=/scratch/vandyk/bayes2/incl-norm/2013-06-25/

source /home/vandyk/bayes2/constraints.bash
source /home/vandyk/bayes2/priors.bash

srun eos-scan-mc \
    --seed ${SEED} \
    --debug \
    --chunks 1 \
    --chunk-size 40000 \
    --parallel 6 \
    --use-pmc \
    --pmc-update ${BASE_NAME}/pmc_step_${PREVIOUS}.hdf5 \
    --pmc-final-chunksize 40000 \
    --pmc-dof 6 \
    ${CONSTRAINTS_INCL} \
    --scan      "Re{c7}"      -1.0     +1.0              --prior flat \
    --scan      "Re{c7'}"     -1.0     +1.0              --prior flat \
    --scan      "Re{c9}"     -10.0    +10.0              --prior flat \
    --scan      "Re{c9'}"    -10.0    +10.0              --prior flat \
    --scan      "Re{c10}"    -10.0    +10.0              --prior flat \
    --scan      "Re{c10'}"   -10.0    +10.0              --prior flat \
    ${NUISANCE_CKM} \
    ${NUISANCE_QUARK_MASSES} \
    ${NUISANCE_DECAY_CONSTANTS} \
    --output "${BASE_NAME}/pmc_step_${CURRENT}.hdf5" \
    > ${BASE_NAME}/pmc_step_${CURRENT}.log 2>&1

#    --pmc-update ${BASE_NAME}/pmc_update_${PREVIDX}.hdf5 \
