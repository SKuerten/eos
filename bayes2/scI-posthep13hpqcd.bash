#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_FINAL_CHUNKSIZE=1000000
export PMC_CLUSTERS=35
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"

export PMC_NUMBER_OF_JOBS=250
export PMC_RESOURCE_MANAGER=loadleveler
export LL_QUEUE=test
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=30

# initial values from mcmc
export GOF_MODE_0="{ -0.3617009217509014 +4.1927218886715307 -4.1315068272272448 +0.7876134474751812 +0.2253838185777059 +0.1099478533454659 +0.3466519802183340 +1.2847475021422308 +4.2012521192065355 +0.2319328426760763 +0.3900449670876246 -4.7543545577443727 +0.8059993449063610 +1.1561369113883619 +0.2695039945877832 +0.2648738241850866 +0.2663702776003255 -1.2237241056314403 +0.0361392002959100 -0.0498652833081652 +0.1436144932747336 +0.9362442673183233 +0.9723511942734310 +1.1077128273165653 +1.0807646325113263 +0.3026517556752158 -3.2769881877017375 +0.1287252934719592 -0.1305997755532441 +0.4928220477892182 +0.3513820409233973 }"
export GOF_MODE_1="{ +0.4962080095788410 -4.5509962043183902 +4.2881763457016806 +0.8129810160166182 +0.2254326223928835 +0.0918066882984121 +0.3885765134081413 +1.2827773731680083 +4.1894789300903765 +0.2294802201766776 +0.3789566456481295 -4.7648692451377270 +0.8262372013453053 +1.0598887484068411 +0.2629920479749958 +0.2686217684314480 +0.2700708902686033 -0.7809565917344634 -0.0770434656918851 -0.0229755432295201 +0.1593321857604569 +0.9651972599249374 +1.0872524356820721 +1.0172754221355942 +1.0910745587475197 +0.3086126058053920 -3.3108621865035146 -0.0868103375613213 +0.8302767956666912 +0.4600302060881613 +0.3497525638729392 }"

# BOBYQA
export GOF_MODE_0="{
 -0.3546027671131614 +4.0986066180374241 -4.2317102669746847
 +0.7851942356740576 +0.2254947201159309 +0.1103088618584480
 +0.3479846088633917 +1.2838396138474035 +4.1986581851918912
 +0.2315575898997383 +0.3883707126904543 -4.7077587113122741
 +0.8315418482529660 +1.1556499429215372 +0.2664593004883700
 +0.2986359244734177 +0.2601067024609786 -1.5172049771046485
 +0.0398769404022141 -0.0416701756592609 -0.0433318716290815
 +0.9370868281078932 +0.9744709390418705 +1.1010844199374976
 +1.0814805402486463 +0.3024636621051395 -3.2666406391667389
 +0.1120239754364055 -0.1677106468687472 +0.4902446441646485
 +0.3509040223490649 }"
export GOF_MODE_1="{
 +0.5016726921540386 -4.7643876761441541 +4.1706391802690082
 +0.8108396964890628 +0.2254554727646118 +0.0920627545253973
 +0.3861506589341814 +1.2830057797035552 +4.1927016125381229
 +0.2294976178498767 +0.3676257896529777 -4.7815949718853075
 +0.8260433295542460 +1.0550980945493491 +0.2609715415163944
 +0.1832163106320194 +0.2643707743425492 -1.0217058938461776
 -0.0732907211970767 -0.0173336862086484 -0.0041938149494817
 +0.9668122247572840 +1.0807403161909273 +1.0239301712259832
 +1.0998321920041905 +0.3107039323127256 -3.0275937416381873
 -0.0510916463937295 +0.8276469466196411 +0.4508464078943176
 +0.3505560939200313 }"

main $@
