#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_ADJUST_SAMPLE_SIZE=1
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"
export PMC_CHUNKSIZE=4000
export PMC_CLUSTERS=40
export PMC_DOF=10
export PMC_FINAL_CHUNKSIZE=250000
export PMC_GROUP_BY_RVALUE=2.3
# 0=A,1=C,2=D, 3=B
export PMC_IGNORE_GROUPS="
    --pmc-ignore-group 0
    --pmc-ignore-group 1
    --pmc-ignore-group 2
    --pmc-ignore-group 4
    --pmc-ignore-group 5
    --pmc-ignore-group 6
"
export PMC_PATCH_LENGTH=200
export PMC_SKIP_INITIAL=0.5

export PMC_NUMBER_OF_JOBS=100
export LL_QUEUE=serial
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=60
#export PMC_CLIENT_ARGV="--resume-samples --step 3"

export PMC_UNCERTAINTY_INPUT="${BASE_NAME}/scIII_posthep13/pmc_parameter_samples_15.hdf5_merge"

export GOF_MODE_0="{ -0.315926 3.29736 -4.266 -0.087385 -0.195331 -0.873777 0.821599 0.225428 0.136917 0.365214 1.27354 4.19181 0.228135 0.389007 -4.58975 0.837305 1.05087 0.281646 0.178771 0.277926 -1.15308 0.0222338 -0.00433159 -0.00763354 0.993229 1.01434 1.08207 0.999792 0.299149 -2.57299 0.000522768 -0.627192 0.451297 0.350608 }"
export GOF_MODE_1="{ 0.494362 -4.28998 4.43703 0.089442 -0.242721 0.604546 0.80773 0.225355 0.124819 0.36754 1.27591 4.18651 0.227778 0.368108 -4.86757 0.819848 1.01377 0.281524 0.161341 0.275524 -1.56455 -0.000486011 -0.00131709 -0.00811516 0.959175 1.01432 1.09955 0.947855 0.294176 -2.65889 -0.0233627 0.736157 0.447527 0.350129 }"
export GOF_MODE_2="{ 0.0106116 3.39141 -1.71856 -0.423711 3.29274 2.6419 0.806974 0.225369 0.129114 0.375102 1.27586 4.18101 0.226939 0.368091 -4.84515 1.04844 0.821207 0.28524 0.2061 0.27577 -1.53535 0.0063333 0.00894195 -0.00269237 0.992341 1.03543 0.999521 1.0139 0.35318 -1.49901 0.00705098 0.0235803 0.45442 0.349862 }"
export GOF_MODE_3="{ 0.113389 -3.7996 1.80595 0.431569 -3.16288 -2.6426 0.798376 0.225464 0.107241 0.353048 1.26291 4.1769 0.230663 0.387068 -5.041 0.934925 0.800387 0.283014 0.0915329 0.276212 -1.83329 0.0370013 -0.0248812 -0.00597566 0.97842 1.04588 0.961654 0.955534 0.339181 -1.49322 -0.205343 0.349517 0.489614 0.351179 }"

main $@
