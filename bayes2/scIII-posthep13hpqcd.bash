#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_ADJUST_SAMPLE_SIZE=1
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"
export PMC_CHUNKSIZE=4000
export PMC_CLUSTERS=40
export PMC_DOF=10
export PMC_FINAL_CHUNKSIZE=250000
export PMC_GROUP_BY_RVALUE=2.3
# 0=A,1=C,2=D, 3=B
export PMC_IGNORE_GROUPS="
    --pmc-ignore-group 0
    --pmc-ignore-group 1
    --pmc-ignore-group 2
    --pmc-ignore-group 4
    --pmc-ignore-group 5
    --pmc-ignore-group 6
"
export PMC_PATCH_LENGTH=200
export PMC_SKIP_INITIAL=0.5

export PMC_NUMBER_OF_JOBS=100
export LL_QUEUE=serial
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=60
#export PMC_CLIENT_ARGV="--resume-samples --step 3"

export PMC_UNCERTAINTY_INPUT="${BASE_NAME}/scIII_posthep13/pmc_parameter_samples_15.hdf5_merge"

export GOF_MODE_0="{ -0.31082 +3.33528 -4.35230 -0.07753 -0.21060 -0.90172 +0.81945 +0.22498 +0.13164 +0.42466 +1.27369 +4.19976 +0.22751 +0.38001 -4.80452 +0.86722 +1.09668 +0.27832 +0.13138 +0.28345 -0.21442 +0.09828 -0.03228 -0.04582 +0.97943 +0.93819 +1.00658 +1.07855 +0.29666 -2.62157 +0.02023 -0.49846 +0.43783 +0.35069 }"
export GOF_MODE_1="{ -0.05188 -0.47761 +0.78536 -0.38111 +3.33831 +4.46059 +0.81944 +0.22544 +0.09856 +0.36475 +1.23949 +4.19143 +0.23174 +0.36766 -4.97104 +0.99909 +0.85129 +0.28234 +0.21037 +0.27563 -1.26153 +0.05575 -0.08466 -0.09765 +0.72729 +0.90070 +1.10552 +1.01880 +0.29634 -2.62443 -0.23854 -0.60614 +0.49336 +0.35156 }"
export GOF_MODE_2="{ +0.18314 -0.34311 -0.84235 +0.41561 -3.63405 -4.42367 +0.81904 +0.22519 +0.12334 +0.34555 +1.25714 +4.15058 +0.22601 +0.36937 -5.03955 +0.93358 +0.81235 +0.30212 +0.53778 +0.30803 -1.47371 -0.11484 +0.17148 +0.05398 +0.91385 +1.10766 +1.11766 +0.98619 +0.28770 -2.73576 +0.11406 +0.62162 +0.33014 +0.34629 }"
export GOF_MODE_3="{ +0.46614 -4.36267 +4.38286 +0.09237 -0.70279 +0.31945 +0.81771 +0.22505 +0.19449 +0.36759 +1.29028 +4.21711 +0.22908 +0.39385 -4.27283 +0.80496 +1.04324 +0.28018 +0.09889 +0.27660 -1.46046 +0.08047 +0.07562 -0.06247 +0.94294 +0.84291 +0.98369 +0.99791 +0.28397 -2.85008 +0.04744 +0.62335 +0.51221 +0.35106 }"

main $@
