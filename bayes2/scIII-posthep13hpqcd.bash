#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_ADJUST_SAMPLE_SIZE=1
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"
export PMC_CHUNKSIZE=4000
export PMC_CLUSTERS=40
export PMC_DOF=10
export PMC_FINAL_CHUNKSIZE=250000
export PMC_GROUP_BY_RVALUE=2.3
# 0=D,1=B,2=A, 3=C
export PMC_IGNORE_GROUPS="
    --pmc-ignore-group 3
    --pmc-ignore-group 1
    --pmc-ignore-group 2
"
export PMC_PATCH_LENGTH=200
export PMC_SKIP_INITIAL=0.5

export PMC_NUMBER_OF_JOBS=200
export LL_QUEUE=serial
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=60
#export PMC_CLIENT_ARGV="--resume-samples --step 3"

export PMC_UNCERTAINTY_INPUT="${BASE_NAME}/scIII_posthep13/pmc_parameter_samples_15.hdf5_merge"

# initial values
export GOF_MODE_0="{ +0.1793915675036721 -0.4014249398818994 -0.3370328042849419 +0.3980236179317265 -3.8417735579402321 -4.4289680545075507 +0.8205404601605857 +0.2253831888254480 +0.1104584643748382 +0.4102578673177673 +1.2668235295613965 +4.2069679054256612 +0.2270244908631584 +0.3743054509371245 -4.8831335015200130 +1.0388621617945470 +0.8168612723696344 +0.2743177485743551 +0.4021365177367631 +0.2809322835332474 -1.0871198922337919 -0.1064284119310974 +0.0722895626066164 -0.1222243993586783 +1.0739518151143643 +0.9574173557367224 +1.0820421920442067 +1.0127165461915910 +0.3003022507036604 -3.1237758756141765 -0.0029555071818135 +0.7743024344487399 +0.4000587329346412 +0.3536778764218754 }"
export GOF_MODE_1="{ +0.4638145987663015 -4.3707175637491593 +4.3666831436399773 +0.1328527624689650 -0.4878305403115911 +0.2180798032936361 +0.7913983411913114 +0.2256178483526531 +0.1048476696944626 +0.3690837248699612 +1.2826488730073473 +4.1774097306683222 +0.2338408505641431 +0.3767741427903690 -4.8183714639558124 +0.8510030006500290 +0.9179483286047220 +0.2468085765885630 -0.3533391544097192 +0.2191709903948536 -1.8630102813580560 +0.0228563306427191 +0.0893238316505659 -0.0384505868193355 +0.8926979368392184 +0.8787222474399595 +1.1771794181766333 +1.0309839472957045 +0.2932080050911282 -3.3033817194264161 +0.0239573452102762 +0.5924614125091363 +0.4285079504504304 +0.3490258468066635 }"
export GOF_MODE_2="{ -0.3522373780328231 +3.7038195656399875 -4.1914966474993074 -0.0007011428779591 +1.0400220426760356 +0.3242084260079546 +0.8049711139197644 +0.2256765294296823 +0.1347596638455939 +0.3934169384128060 +1.2728338985565701 +4.1696616766598797 +0.2302627712216658 +0.3856654912530234 -4.6147367976053060 +0.8297571010660635 +0.9917338619377528 +0.2585013499196160 -0.0369123078243152 +0.2539940469386637 -1.4729952281959204 -0.1264213257300405 -0.1271543983949218 +0.1000994721218982 +1.0585731680209169 +1.0759163609831559 +0.9590731495359022 +1.1543784291805443 +0.2912878537159459 -3.3838052606259938 +0.0875349844813168 -0.4950811507742649 +0.4064857532645673 +0.3498796731652685 }"
export GOF_MODE_3="{ -0.0155998760603821 -0.7995821618907565 +0.4570229670319449 -0.4168650182497209 +3.9736041419389871 +4.3893268337482345 +0.8050644567109824 +0.2255535016151134 +0.1702374293864484 +0.3798558543670760 +1.2985241770401181 +4.1843697874266770 +0.2251546364794204 +0.3805631945703116 -4.7596152124406013 +0.9564638265215814 +0.8062560654409867 +0.2554670105068654 +0.2407362388864465 +0.2465425903438246 -1.4669076341287484 +0.1038699124525493 +0.0162349560438156 -0.0755689560838587 +0.9762342136109543 +0.9265491620062778 +1.0389124362383533 +1.3385774807332766 +0.3074742845653586 -2.8837102517199593 -0.1488772512535989 -0.5774836303178862 +0.3851602501997922 +0.3495250260916843 }"

# BOBYQA
export GOF_MODE_0="{
 +0.1511251755255345 -0.4032028484462637 -0.4852016080815704
 +0.4059691733431722 -3.8706811714180409 -4.2834154791241801
 +0.8197342755563134 +0.2253524638647652 +0.1207491995176312
 +0.3937011343959504 +1.2674920025984022 +4.2044367021965430
 +0.2270159346955800 +0.3717676650741700 -4.8252740224259378
 +1.0488674196571435 +0.8322964893262693 +0.2824250496382898
 +0.4225448037410564 +0.2776939851604653 -1.2120292230293397
 -0.0915986141530701 +0.0619932945233443 -0.0732584905498988
 +1.0705326993136344 +0.9675903041403139 +0.9070254066433209
 +1.0212829335803237 +0.3005919102637959 -3.0487933853250602
 -0.0123147321445396 +0.7801573870879940 +0.4101773225339999
 +0.3509750556743276 }"
export GOF_MODE_1="{
 +0.4869893356704660 -4.4906101273214931 +4.4355261568265361
 +0.1329187879824148 -0.3929626383549490 +0.3604274141650922
 +0.7945662134177933 +0.2256807499540909 +0.1090978088253719
 +0.3642874760808377 +1.2826336940183511 +4.1842489378560810
 +0.2250739183094026 +0.3629128871739176 -4.8028966543241296
 +0.8370793980079525 +0.9492987346777283 +0.2511007340612395
 -0.2667272805100799 +0.2299837789483723 -1.7501249013665077
 +0.0007669541138600 +0.0723540223553715 -0.0432621564038505
 +0.8939430182415460 +0.8695669987706329 +1.1723098322045427
 +1.0303783988253494 +0.2904922392937322 -3.1904657236267511
 +0.0268228922830522 +0.6022529572311984 +0.4483742112167882
 +0.3496759656231211 }"
export GOF_MODE_2="{
 -0.3478138434026574 +3.6192275849809392 -4.1450675009769320
 -0.0210563264757002 +1.0799571832442161 +0.1809625656629924
 +0.8035449622313638 +0.2256986468020774 +0.1404820561488539
 +0.3944867136061826 +1.2707337167430526 +4.1716362697401275
 +0.2296650856786349 +0.3820874955246897 -4.6586710693571289
 +0.8373362263984676 +0.9905288464945807 +0.2682029645947260
 -0.0488678543249019 +0.2636431926704426 -1.2890053502356447
 -0.1168620408938915 -0.0222459771877986 +0.0802227437328420
 +1.0334808615076128 +1.0418473716673740 +0.9548008303228458
 +1.1140009929177843 +0.2918208299137597 -3.2619197589359494
 +0.0390183847812320 -0.4723329176258826 +0.4047660908863168
 +0.3490989289117974 }"
export GOF_MODE_3="{
 -0.0230814743653742 -0.5250663856254302 +0.5016281568890346
 -0.4129907710336000 +3.9653288279366410 +4.3054259043756611
 +0.8092648825604415 +0.2252942861517817 +0.1483004134171189
 +0.3639560861819949 +1.2891928190008917 +4.1821839267735612
 +0.2256818849450468 +0.3740816943062943 -4.8713885977898661
 +0.9508194902221326 +0.8174991812682432 +0.2620811568949713
 +0.0781542977536187 +0.2506957944204262 -1.6252399377995144
 +0.1031843953958568 -0.0174953769631604 -0.0550107576654171
 +0.9463252778548149 +0.9256417198089661 +1.0100639609709363
 +1.1454025999251110 +0.3067262426296636 -2.9578189991471997
 -0.1428547943895557 -0.5564387483704107 +0.3852943899477073
 +0.3498777462935151 }"

main $@
