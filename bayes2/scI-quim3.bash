#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=1000
export MCMC_PRERUN_CHAINS=12
export MCMC_PRERUN_PARALLEL=1

export PMC_FINAL_CHUNKSIZE=2000000
export PMC_CLUSTERS=50

export PMC_NUMBER_OF_JOBS=100

## 2013-08-04
## six groups (11 2 10 10 11 4)
# group  chain                                      sign     MAP
# 0      00,01,03,05,09,14,23,25,34,37,42           (+,-,+)  130.20
# 1      02,44                                      (+,-,-)   91.25
# 2      04,10,13,20,30,31,32,40,45,47              (-,+,-)  130.27
# 3      06,07,15,18,21,24,27,35,39,46              (+,+,-)  119.32
# 4      08,11,12,16,19,28,29,33,38,41,43           (-,-,+)  117.06
# 5      17,22,26,36                                (-,+,+)   93.05
## best fit in chain 40 (log posterior = 130.2712289)
##"{ -0.36741 +4.75611 -4.31901 +0.78865 +0.22565 +0.12068 +0.37492 +1.26459 +4.18263 +0.22578 +0.37926 -4.92808 +0.82862 +1.14924 +0.24083 +0.33914 +0.16000 -0.80186 -0.01044 +0.14699 -0.05451 +0.97836 +1.05060 +0.87932 +0.92863 +0.48445 +0.34979 }"

export GOF_MODE_0="{ +0.52498 -6.01743 +4.46894 +0.81308 +0.22583 +0.10676 +0.37780 +1.26832 +4.18615 +0.23027 +0.28765 -5.05459 +0.97366 +1.06388 +0.19973 +0.56884 +0.17298 -0.72245 -0.03993 -0.02722 +0.12734 +1.02048 +1.04946 +0.84141 +1.04753 +0.38043 +0.37489 }"
export GOF_MODE_1="{ +0.51945 -8.53708 -4.45419 +0.81223 +0.22492 +0.11660 +0.37237 +1.27325 +4.18235 +0.22947 +0.21877 -2.59189 +1.22861 +0.94036 -0.04949 -1.06391 +0.13970 +4.96265 +0.03837 -0.10873 -0.07739 +1.03918 +0.90101 +0.89326 +1.01575 +0.42044 +0.34563 }"
export GOF_MODE_2="{ -0.36741 +4.75611 -4.31901 +0.78865 +0.22565 +0.12068 +0.37492 +1.26459 +4.18263 +0.22578 +0.37926 -4.92808 +0.82862 +1.14924 +0.24083 +0.33914 +0.16000 -0.80186 -0.01044 +0.14699 -0.05451 +0.97836 +1.05060 +0.87932 +0.92863 +0.48445 +0.34979 }"
export GOF_MODE_3="{ +0.52712 +1.72512 -2.25122 +0.80489 +0.22545 +0.12172 +0.36874 +1.30308 +4.18006 +0.22611 +0.40907 -4.75155 +0.71586 +1.21620 +0.21929 -0.75966 +0.28883 -0.07588 +0.02455 +0.13842 -0.12033 +0.96448 +1.06829 +0.69912 +1.22160 +0.47285 +0.34731 }"
export GOF_MODE_4="{ -0.35202 -3.08161 +2.41782 +0.80998 +0.22537 +0.14794 +0.40334 +1.28539 +4.19678 +0.23171 +0.46725 -5.01252 +0.69442 +1.16322 +0.26662 +0.54092 +0.36414 -0.68455 -0.04656 -0.02726 +0.02110 +0.86282 +1.05003 +0.59055 +1.19632 +0.48849 +0.34019 }"
export GOF_MODE_5="{ -0.35034 +6.66880 +4.32559 +0.81918 +0.22543 +0.20549 +0.36225 +1.27349 +4.18528 +0.22838 +0.20854 -2.90215 +1.23535 +1.08143 -0.04930 -1.56061 +0.09317 +3.12171 -0.05067 +0.09203 -0.06453 +1.05433 +1.08307 +0.90946 +1.13548 +0.51764 +0.34109 }"

# just let them die out in first step
# export PMC_IGNORE_GROUPS="
#     --pmc-ignore-group 0
#     --pmc-ignore-group 1
#     --pmc-ignore-group 3
#     --pmc-ignore-group 4
# "

main $@
