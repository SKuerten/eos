#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=20000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_CHUNKSIZE=1500
export PMC_GROUP_BY_RVALUE=2
export PMC_FINAL_CHUNKSIZE=1000000
export PMC_CLUSTERS=25
export PMC_INITIALIZATION="$PMC_INITIALIZATION --pmc-r-value-no-nuisance 0"
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 50"
export PMC_SKIP_INITIAL=0.2

export PMC_NUMBER_OF_JOBS=250
export PMC_RESOURCE_MANAGER=loadleveler
export LL_QUEUE=test
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=30

# BOBYQA
export GOF_MODE_0="{
 +0.8118397518535488 +0.2255445464785774 +0.1100037939503916
 +0.3703299055637777 +1.2744132117575957 +4.1909748234720361
 +0.2289861184520069 +0.3856052030666717 -4.6923706819401714
 +0.8442200868320692 +1.1175613752050411 +0.2417248844208102
 +0.2324725096072476 +0.2274420476998674 -0.6824727437358048
 -0.0158954180001218 -0.0097150103440470 -0.0129892315052538
 +0.8816621876363251 +1.0348386995119681 +1.1668183018335545
 +1.0552634546381101 +0.2961043135325561 -3.1506199403720880
 -0.0223635913944357 -0.3370481089296705 +0.4265276232485582
 +0.3503791385760284 }"

# COBYLA
export GOF_MODE_1="{
 +0.8018744553136193 +0.2256291283439864 +0.1427660544632709
 +0.3587921436284806 +1.2701482922066287 +4.1853696893839212
 +0.2281606364622791 +0.3891178155909934 -4.6478765935353854
 +0.8473515150803829 +1.1365001503250232 +0.2384067963466800
 +0.1019627245872971 +0.2225888228390762 -0.6419593079966814
 +0.0275868818721778 +0.0214965684442042 +0.0113603966284923
 +0.8862257956122285 +1.0095311108149412 +1.1894443400027377
 +1.0946148481003224 +0.2980616878115323 -3.1509565373617630
 -0.0318722425161238 -0.3388668638011934 +0.4250691287915809
 +0.3500895225081945 }"

main $@
