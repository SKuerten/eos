#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=1000
export MCMC_PRERUN_CHAINS=12
export MCMC_PRERUN_PARALLEL=1

export PMC_FINAL_CHUNKSIZE=1000000
export PMC_CLUSTERS=35

export PMC_NUMBER_OF_JOBS=100

## 2013-08-16
## five groups (11 12 9 14 2)
# group  chains                                     sign     MAP    in chain
# 0      00,02,03,05,06,07,09,18,27,35,44           (+,+,-)  591.06    03
# 1      01,14,19,20,21,23,25,29,34,37,41,42        (+,-,+)  613.54    25
# 2      04,08,11,12,22,33,38,39,43                 (-,-,+)  594.41    39
# 3      10,13,15,16,24,26,28,30,31,32,40,45,46,47  (-,+,-)  614.37    15
# 4      17,36                                      (-,+,+)  <400      36
## best fit in chain 15 (log posterior = 614.37)
##"{ -0.36232 +4.01767 -4.54387 +0.80926 +0.22470 +0.17037 +0.38229 +1.30383 +4.16365 +0.22668 +0.38913 -4.65986 +0.80004 +1.00066 +0.21454 -0.10858 +0.19203 -1.03480 +0.06867 +0.00261 +0.08723 +0.86823 +1.03559 +1.16592 +0.92120 +0.31903 -2.17373 +0.02113 -0.86013 +0.49683 +0.34690 }"

export GOF_MODE_0="{ +0.52524 +2.52905 -3.80980 +0.80439 +0.22600 +0.15538 +0.38227 +1.28584 +4.15276 +0.22980 +0.30725 -4.95730 +0.92666 +0.94590 +0.24895 +0.35944 +0.57355 +4.66095 +0.14050 +0.00963 -0.11649 +1.21478 +0.88939 +0.56365 +1.11321 +0.33702 -1.93524 +0.08597 -0.21707 +0.41709 +0.34812 }"
export GOF_MODE_1="{ +0.52815 -5.10734 +4.36738 +0.80427 +0.22542 +0.13233 +0.40478 +1.26704 +4.19240 +0.22652 +0.35307 -4.96542 +0.81459 +1.14142 +0.22586 -0.09445 +0.25179 -0.59483 -0.08194 +0.03864 +0.11101 +1.08058 +0.91292 +1.18037 +0.88966 +0.32457 -2.17293 -0.03763 +0.96540 +0.48620 +0.34868 }"
export GOF_MODE_2="{ -0.36087 -3.77642 +3.10443 +0.82280 +0.22522 +0.09523 +0.40269 +1.28114 +4.16757 +0.22926 +0.32406 -5.02370 +0.89713 +1.11610 +0.25996 +0.90052 +0.23729 -1.45597 -0.07549 +0.04432 -0.08237 +0.89538 +1.01131 +0.55288 +0.88415 +0.33136 -2.03478 +0.03642 +0.21908 +0.45961 +0.35044 }"
export GOF_MODE_3="{ -0.36232 +4.01767 -4.54387 +0.80926 +0.22470 +0.17037 +0.38229 +1.30383 +4.16365 +0.22668 +0.38913 -4.65986 +0.80004 +1.00066 +0.21454 -0.10858 +0.19203 -1.03480 +0.06867 +0.00261 +0.08723 +0.86823 +1.03559 +1.16592 +0.92120 +0.31903 -2.17373 +0.02113 -0.86013 +0.49683 +0.34690 }"
export GOF_MODE_4=""

# just let them die out in first step
# export PMC_IGNORE_GROUPS="
#     --pmc-ignore-group 0
#     --pmc-ignore-group 1
#     --pmc-ignore-group 3
#     --pmc-ignore-group 4
# "

main $@
