#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=20000
export MCMC_PRERUN_UPDATE_SIZE=500
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_CHUNKSIZE=2000
export PMC_GROUP_BY_RVALUE=2
export PMC_CLUSTERS=30
export PMC_INITIALIZATION="$PMC_INITIALIZATION --pmc-r-value-no-nuisance 0"
export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 50"
export PMC_SKIP_INITIAL=0.2

export PMC_NUMBER_OF_JOBS=250
export PMC_RESOURCE_MANAGER=loadleveler
export LL_QUEUE=test
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=30

# starting point
export GOF_MODE_0="{ +0.7948443215534173 +0.2248383158262807 +0.1406616093086223 +0.3464674872680484 +1.2613324135191839 +4.1987911692897582 +0.2288915784716987 +0.3863025876571300 -4.6349869609410446 +0.8561210544891955 +1.0695550097016406 +0.2961119793499307 +0.8389340031399251 +0.3085041663783661 -1.9866601961767021 -0.0746235754464003 -0.0591978806445719 +0.0621531530095291 +0.9383594347524581 +0.9854922745774380 +1.0844409873190963 +1.1774235264457427 +0.3183436858730680 -2.6279906748585096 -0.0148293394905721 -0.7449478145943347 +0.3772353228472650 +0.3484796424444139 }"

# BOBYQA
export GOF_MODE_0="{
 +0.7967413364781069 +0.2249790696366584 +0.1274301023625086
 +0.3428087993161781 +1.2604821036932483 +4.1891359485386381
 +0.2285454424297662 +0.3767508520564333 -4.6929522277223752
 +0.8761178887932185 +1.0692685446683923 +0.2983229763505073
 +0.9454914964109010 +0.3040405041651147 -1.3933277251027067
 -0.0436242145016053 -0.0679673131379073 +0.0532666631022542
 +0.9356939728331943 +1.0173037292682681 +1.1296805780862877
 +1.1809161150088003 +0.3106161709730781 -2.8233398595259440
 -0.0407790081566910 -0.4693420855826386 +0.3751816624479489
 +0.3502736497620136 }"

# COBYLA
export GOF_MODE_1="{
 +0.7935548713338831 +0.2248883713419641 +0.1323653216158621
 +0.3614674284637155 +1.2619593657570518 +4.1934548868576975
 +0.2277826468069096 +0.3876597777765426 -4.5902838085548288
 +0.8649287531705406 +1.0691587255007724 +0.2908861344911916
 +0.8412447501180850 +0.2901547408552784 -1.5778681276676898
 -0.0328513127876320 -0.0585532817572795 +0.0400864021420847
 +0.9264427660527045 +0.9636838111911087 +1.0892421947280715
 +1.1130003333622602 +0.3164327479043612 -2.7099292169993348
 +0.0103345084814143 -0.5478278621089323 +0.3744607394142704
 +0.3505033313024143 }"

main $@
