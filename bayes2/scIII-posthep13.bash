#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=800
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"
export PMC_ADJUST_SAMPLE_SIZE=1
export PMC_CHUNKSIZE=4000
export PMC_CLUSTERS=50
export PMC_FINAL_CHUNKSIZE=250000
export PMC_GROUP_BY_RVALUE=2
export PMC_PATCH_LENGTH=200
export PMC_SKIP_INITIAL=0.5
# 0=D,1=C,2=B,3=A
export PMC_IGNORE_GROUPS="
    --pmc-ignore-group 1
    --pmc-ignore-group 3
"

export PMC_NUMBER_OF_JOBS=100
export LL_QUEUE=serial
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=60
export PMC_CLIENT_ARGV="--resume-samples --step 3"

export PMC_UNCERTAINTY_INPUT="${BASE_NAME}/scIII_posthep13/pmc_parameter_samples_15.hdf5_merge"

export GOF_MODE_0="{ +0.09279 -0.71658 -0.62039 +0.40307 -3.69668 -4.57915 +0.80256 +0.22532 +0.06386 +0.36407 +1.26332 +4.21015 +0.22937 +0.39652 -4.57418 +1.05489 +0.82686 +0.26285 -0.14794 +0.24709 -0.34462 -0.03520 +0.00607 -0.20922 +0.89997 +0.96355 +0.82546 +1.15800 +0.29384 -2.62888 +0.00153 +0.81901 +0.33862 +0.35404 }"
export GOF_MODE_1="{ -0.02892 +0.40975 -0.11263 -0.40017 +4.14148 +4.32703 +0.81053 +0.22577 +0.13222 +0.41435 +1.29595 +4.18944 +0.23354 +0.37625 -4.93852 +1.00254 +0.82962 +0.22440 -0.55923 +0.21721 +0.02759 -0.06630 -0.06713 +0.00109 +1.02391 +0.97298 +1.19182 +1.00609 +0.30596 -2.53541 -0.02929 -0.50562 +0.53423 +0.34794 }"
export GOF_MODE_2="{ +0.49931 -4.56602 +4.16359 +0.08512 -0.15755 +0.47489 +0.82169 +0.22543 +0.05107 +0.34358 +1.24849 +4.16847 +0.23062 +0.36119 -4.88090 +0.81007 +1.16557 +0.28008 +0.30770 +0.28354 -0.94327 -0.10653 +0.09145 +0.01760 +0.90162 +1.09227 +0.93531 +0.80241 +0.29791 -2.73525 +0.07722 +0.95219 +0.41471 +0.34956 }"
export GOF_MODE_3="{ -0.35890 +3.82253 -4.76929 -0.06438 +0.03646 -0.62593 +0.77509 +0.22462 +0.10911 +0.35344 +1.26789 +4.19493 +0.22286 +0.39829 -4.34777 +0.80831 +1.03581 +0.26974 +0.47796 +0.24840 -1.20413 -0.01679 -0.03228 +0.03776 +0.81736 +1.03168 +1.12361 +0.87248 +0.30034 -2.30923 -0.03308 -0.58690 +0.44935 +0.35011 }"

main $@
