#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=800
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"
export PMC_ADJUST_SAMPLE_SIZE=1
export PMC_CHUNKSIZE=4000
export PMC_CLUSTERS=50
export PMC_FINAL_CHUNKSIZE=250000
export PMC_GROUP_BY_RVALUE=2.35
export PMC_PATCH_LENGTH=200
export PMC_SKIP_INITIAL=0.5
# 0=D,1=B,2=A,3=C
export PMC_IGNORE_GROUPS="
    --pmc-ignore-group 3
    --pmc-ignore-group 1
    --pmc-ignore-group 2
"

export PMC_NUMBER_OF_JOBS=200
export LL_QUEUE=serial
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=60
# export PMC_CLIENT_ARGV="--resume-samples --step 3"

export PMC_UNCERTAINTY_INPUT="${BASE_NAME}/scIII_posthep13/pmc_parameter_samples_15.hdf5_merge"

export GOF_MODE_0="{ 1.29434288e-01  -5.30057320e-01  -5.26724694e-01   4.16486561e-01
  -3.96338051e+00  -4.54484402e+00   8.00540840e-01   2.25311059e-01
   1.14508892e-01   3.66858812e-01   1.26494216e+00   4.20758059e+00
   2.27820560e-01   3.80625213e-01  -4.83009045e+00   1.04932970e+00
   8.25858096e-01   2.56556473e-01  -4.81280582e-02   2.42518071e-01
  -7.68896570e-01  -2.04841634e-02   2.89494486e-03   4.45327234e-03
   1.07774961e+00   9.50911521e-01   8.96043387e-01   1.13675125e+00
   2.96367826e-01  -2.61355747e+00  -1.84980919e-02   8.12523308e-01
   4.60083829e-01   3.51364973e-01 }"
export GOF_MODE_1="{ 3.43055462e-03   4.18749775e-01  -8.03227521e-02  -4.08684601e-01
   4.14364617e+00   4.31024393e+00   8.11510876e-01   2.25473187e-01
   1.34733914e-01   3.75385099e-01   1.27610796e+00   4.18804018e+00
   2.26878415e-01   3.73781861e-01  -4.89340437e+00   1.02346725e+00
   8.31663452e-01   2.30144040e-01  -5.37686190e-01   2.17978294e-01
  -3.70775663e-01  -2.14891367e-02  -3.40834950e-02   1.49452901e-02
   1.02354818e+00   9.60853489e-01   1.06966897e+00   1.08577840e+00
   3.04398123e-01  -2.45896782e+00  -4.55178000e-02  -6.15129425e-01
   4.48452294e-01   3.50443323e-01 }"
export GOF_MODE_2="{ 0.50130566 -4.55652602  4.29178626  0.08950381 -0.2982524   0.46358933
  0.81049939  0.22539319  0.12375705  0.35953806  1.26264549  4.17234858
  0.22579174  0.36445546 -4.97993804  0.81519863  1.05550165  0.28136844
  0.36575192  0.2752831  -0.90352282 -0.03516757  0.01256325 -0.03388614
  0.93028447  1.00047831  1.08959604  0.95990448  0.29308287 -2.69599627
 -0.0458747   0.62071794  0.43173419  0.34901193 }"
export GOF_MODE_3="{ -0.35564325  3.73811376 -4.73350956 -0.05851731 -0.16766925 -0.54184289
  0.77674431  0.22481474  0.11026055  0.35974253  1.27566624  4.19024962
  0.22447706  0.39906827 -4.48220644  0.81420296  1.03496819  0.26758153
  0.44368957  0.24921993 -0.75421545 -0.01265352 -0.01616151  0.02484038
  0.8569952   1.03109793  1.05937475  0.88379321  0.30101422 -2.53188001
 -0.02323578 -0.56784483  0.49314017  0.35054095 }"

main $@
