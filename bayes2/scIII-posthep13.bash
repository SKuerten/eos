#!/bin/bash
#vim: set sts=4 et :

source ${EOS_SCRIPT_PATH}/job.bash

export MCMC_PRERUN_SAMPLES=40000
export MCMC_PRERUN_UPDATE_SIZE=800
export MCMC_PRERUN_CHAINS=1
export MCMC_PRERUN_PARALLEL=0

export PMC_CONVERGENCE="$PMC_CONVERGENCE --pmc-crop-highest-weights 200"
export PMC_ADJUST_SAMPLE_SIZE=1
export PMC_CHUNKSIZE=4000
export PMC_CLUSTERS=50
export PMC_FINAL_CHUNKSIZE=250000
export PMC_GROUP_BY_RVALUE=2
export PMC_PATCH_LENGTH=200
export PMC_SKIP_INITIAL=0.5
# 0=D,1=C,2=B,3=A
export PMC_IGNORE_GROUPS="
    --pmc-ignore-group 1
    --pmc-ignore-group 3
"

export PMC_NUMBER_OF_JOBS=100
export LL_QUEUE=serial
export LL_FINAL_QUEUE=serial
export PMC_POLLING_INTERVAL=60
export PMC_CLIENT_ARGV="--resume-samples --step 3"

export PMC_UNCERTAINTY_INPUT="${BASE_NAME}/scIII_posthep13/pmc_parameter_samples_15.hdf5_merge"

export GOF_MODE_0="{ 1.27476437e-01  -6.05261332e-01  -5.23518977e-01   4.16427885e-01
  -3.94017579e+00  -4.53462258e+00   8.00521742e-01   2.25310605e-01
   1.12838039e-01   3.66132500e-01   1.26494214e+00   4.20800969e+00
   2.28061933e-01   3.81432189e-01  -4.82101523e+00   1.05285201e+00
   8.25294014e-01   2.59162300e-01  -6.64077232e-02   2.45526850e-01
  -7.64989158e-01  -3.94409623e-02   4.02954376e-03   2.16182725e-02
   1.11268911e+00   9.50946335e-01   8.67634796e-01   1.15056979e+00
   2.95764077e-01  -2.62326929e+00  -4.54049603e-04   8.13636729e-01
   4.72616709e-01   3.51368901e-01 }"
export GOF_MODE_1="{ 0.00542166 0.392784 -0.122716 -0.405894 4.15292 4.31255 0.811481 0.225557 0.133266 0.373452 1.27468 4.19537 0.226781 0.376126 -4.87662 1.05026 0.83192 0.226736 -0.551368 0.217207 -0.307163 0.000881528 -0.0366812 0.0463024 1.00572 0.97477 1.0818 1.07176 0.304297 -2.48258 -0.0503872 -0.587939 0.452104 0.350496 }"
export GOF_MODE_2="{ 0.507957 -4.63087 4.24452 0.0818466 -0.262814 0.448998 0.811255 0.225393 0.123844 0.357895 1.26226 4.17175 0.225762 0.359132 -4.99667 0.813113 1.05177 0.279528 0.352155 0.272781 -0.902664 -0.0375051 0.017983 -0.0392809 0.925814 1.0067 1.08578 0.959785 0.293999 -2.69749 -0.0455685 0.621364 0.430835 0.349055 }"
export GOF_MODE_3="{ -0.358618 3.79189 -4.63755 -0.0676502 -0.052223 -0.558932 0.776207 0.224798 0.110818 0.358385 1.27567 4.19089 0.224312 0.398024 -4.46083 0.80843 1.03698 0.267929 0.456082 0.248691 -0.746875 -0.0123786 -0.0168031 0.0289458 0.850985 1.03484 1.05472 0.88311 0.299774 -2.58135 -0.0223795 -0.558516 0.492408 0.350473 }"

main $@
